var addOrUpdateDisabled=true;var favDisabledDueToInventory=false;var disabledDueToId="";var disabledDueToInventory=false;var SKU_STATE_DEFAULT=0;var SKU_STATE_SELECTED=1;var SKU_STATE_ILLEGAL=2;var SKU_STATE_NOT_AVAILABLE=3;var SKU_STATE_DEFAULT_CLASS="";var SKU_STATE_SELECTED_CLASS="sku_select";var SKU_STATE_ILLEGAL_CLASS="sku_illegal";
var SKU_STATE_NOT_AVAILABLE_CLASS="sku_not_available";var COLOR_STATE_DEFAULT_CLASS="";var COLOR_STATE_SELECTED_CLASS="swatch_selected";var updateFavAction=false;var isSinglelotSingleSku=false;$(document).ready(function(){var c=$("#PAGETYPE").html();if(c=="PP_Graphical"||c=="PPE_Graphical"){onLoadForGraphicalPP();
}else{if(c=="LOT_Graphical"){onLoadForGraphicalLot();}else{if(c=="MTM_Graphical"){var d=$("#FROMBAG").html();onLoadForMTM(d);}else{if(c=="LOTMTM_Graphical"){var d=$("#FROMBAG").html();onLoadForLOTMTM(d);}}}}handleSingleLotSingleSkus();if(gup("fromBag")!="true"&&gup("fromFav")!="true"){validateAllSkuOptionsFilled();
}});function validateAllSkuOptionsFilled(){try{$('form[id*="lotSKUSelectionForm"]').each(function(){var d=$(this).attr("id").substring(19);var a=$("#isSingleLotSingleSku"+d).html();if(a!="true"){checkForSingleColorSwatch(d);checkForSkuSelectionComplete(d);}});}catch(b){handlejavaScriptError(b);}}function checkForSingleColorSwatch(f){var e=0;
var d="";$("#"+f+"COLOR img").each(function(){if(!isTooltipImage(this)&&($(this).parent().parent().attr("style")==""||$(this).parent().parent().attr("style")==undefined)){e++;d=$(this).attr("alt");}});if(e==1){$("#Input"+f+"COLOR").val(d);$("#"+f+"COLORDisplay").html(d);}}function getColorCount(d){var f=0;
var e=$('div[id="skuOptions"]').html();if(e==null){$("#"+d+"COLOR img").each(function(){if(!isTooltipImage(this)){f++;}});}return f;}function checkForSkuSelectionComplete(d){var c="Add to Bag";$("#selectedSKUAttributeName"+d).val("COLOR");if(disabledDueToInventory==true&&favAction==false){c="Item is out of stock in current selections, and not available for purchase.";
}if(c!=""){$("#lotSKUSelectionForm"+d).find('input[id*="Input'+d+'"]').each(function(){if(this.id=="Input"+d+"COLOR"&&$(this).val()==""){c="select all options before proceeding.";return;}if($(this).val()==""){c="select all options before proceeding.";}});}if(c=="Add to Bag"){showSpinner("blockedSectionDiv");
submitLotSKUSelectionForm(d);}}function handleSingleLotSingleSkus(){try{$('form[id*="lotSKUSelectionForm"]').each(function(){var a=$(this).attr("id").substring(19);var l=$("#isSingleLotSingleSku"+a).html();if(l=="true"){isSinglelotSingleSku=true;}if(l=="true"){var o=$("#channelAvailability"+a).html();
var n=$("#isFurniture"+a).html();if(o&&o!=""){$("#truckDeliveryInfo").show();if(o=="online"){$("#channelMessaging"+a).html("ONLINE EXCLUSIVE");}if(o=="store"){$("#channelMessaging"+a).html("IN-STORE ONLY");if($("#PAGETYPE").html()=="LOT_Graphical"){displayFindStoreLink(n,"",$("#selectedSKUId"+a).html(),$("#selectedLotId"+a).html());
}else{displayFindStoreLink(n,$("#selectedPPId"+a).html(),$("#selectedSKUId"+a).html(),$("#selectedLotId"+a).html());}}if(o=="both"){$("#channelMessaging"+a).html("ALSO IN STORES");if($("#PAGETYPE").html()=="LOT_Graphical"){displayFindStoreLink(n,"",$("#selectedSKUId"+a).html(),$("#selectedLotId"+a).html());
}else{displayFindStoreLink(n,$("#selectedPPId"+a).html(),$("#selectedSKUId"+a).html(),$("#selectedLotId"+a).html());}}}var k="#truckAndWhiteGloveDelivery"+a;if($("#singleLotSkuTruckDel"+a).html()!=""&&$("#singleLotSkuTruckDel"+a).html()!=undefined){$("#truckDeliveryInfo").show();$(k).html($("#singleLotSkuTruckDel"+a).html());
}var p=$("#availabilityStatusForSingleLotSingleSku"+a).html();if(p=="true"){var q=$("#messageSingleLotSingleSku"+a).html();if(q&&q!=""){$("#inventoryMessage").html(q);$("#dynamicMessages").show();}}else{disabledDueToInventory=true;favDisabledDueToInventory=true;var m="Item is out of stock in current selections, and not available for purchase.";
$("#swatch4").html("<p>"+m+"</p>");$("#addtobag").attr("href","#swatch4");jcp.toolTipSwatch();$("#addToBagForm").parent().parent().addClass("red_btn_disabled");if($("#addtobag").attr("name")=="add to bag"){$("#addToBagImg").attr("src","/dotcom/images/add_to_bag_txt_disabled.png");}else{$("#addToBagImg").attr("src","/dotcom/images/update_bag_txt_disabled.png");
}}displayCustomerRepresentativeLink(a,$("#selectedLotId"+a).html());}});}catch(b){handlejavaScriptError(b);}}function onLoadForGraphicalPP(){checkForErrors();defaultGraphicalQuantity();showSKUTitle();checkForHemmingFromShoppingBag();checkForGenericVdataFromShoppingBag();updateToolTipMessage();showPPAttributesFromBag();
setupBazaarVoice();}function onLoadForGraphicalLot(){checkForErrors();defaultGraphicalQuantity();showSKUTitle();updateToolTipMessage();checkForGenericVdataFromShoppingBag();checkForHemmingFromShoppingBag();showPPAttributesFromBag();}function showPPAttributesFromBag(){if(gup("fromBag")=="true"||gup("fromFav")=="true"){$('form[id*="lotSKUSelectionForm"]').each(function(){var e=$(this).attr("id").substring(19);
var f=jQuery.trim($("#channelMessaging"+e).html());var d=jQuery.trim($("#truckAndWhiteGloveDelivery"+e).html());if(f.length!=0||d.length!=0){$("#truckDeliveryInfo").show();}});}}function updateToolTipMessage(){var b=getMessageForToolTip();$("#addtobag").addClass("swatch");$("#swatch4").html("<p>"+b+"</p>");
$("#addtobag").attr("href","#swatch4");if("select all options before proceeding."!=b){$("#registry_swatch").html("<p>Add to Registry</p>");$("#fav_swatch").html("<p>Add to Favourites</p>");if(gup("grView")=="dashboard"){$("#registry_swatch").html("<p>add to registry</p>");}}jcp.toolTipSwatch();}function getMessageForToolTip(){var c="Add to Bag";
if(gup("updateShoppingBag")=="true"){c="Update Bag";}if(gup("grView")=="dashboard"){c="buy this Item";}try{$('form[id*="lotSKUSelectionForm"]').each(function(){var b=$(this).attr("id").substring(19);if(disabledDueToInventory==true&&favAction==false){c="Item is out of stock in current selections, and not available for purchase.";
if($("#addtobag").attr("name")=="add to bag"){$("#addToBagImg").attr("src","/dotcom/images/add_to_bag_txt_disabled.png");}else{$("#addToBagImg").attr("src","/dotcom/images/update_bag_txt_disabled.png");}$("#addToBagForm").parent().parent().addClass("red_btn_disabled");}else{$("#addToBagForm").parent().parent().removeClass("red_btn_disabled");
if($("#addtobag").attr("name")=="add to bag"){$("#addToBagImg").attr("src","/dotcom/images/add_to_bag_txt.png");}else{$("#addToBagImg").attr("src","/dotcom/images/update_bag_txt.png");}}if(c!=""){$(this).find('input[id*="Input'+b+'"]').each(function(){if(this.id=="Input"+b+"COLOR"&&$(this).val()==""){c="select all options before proceeding.";
return;}if($(this).val()==""){c="select all options before proceeding.";}});if(c!=""){var a=$("#prod_quantity"+b).val();if(!a||a==""){c="select all options before proceeding.";}else{if(a<1||a>99){c="select all options before proceeding.";}}}}});}catch(d){handlejavaScriptError(d);}return c;}function showSKUTitle(){try{$('form[id*="lotSKUSelectionForm"]').each(function(){var d=$(this).attr("id").substring(19);
var a=false;$("#lotSKUSelectionForm"+d+' ul[id*="'+d+'"]').each(function(){if(this.id!=d+"COLOR"){a=true;}});if(a){$("#skuTitle"+d).show();}});}catch(b){handlejavaScriptError(b);}}function selectOption(d,e,f){if(f=="Lot"){lastSelectedLotId=$(d).attr("id");lastSelectedSkuId="";clearCustomerReprentativeLink(e);
}if(f=="Sku"){lastSelectedSkuId=$(d).attr("id");}$("#errorMessagesUL").html("");$("#errorContainer").hide();$("#prod_quantity"+e).removeClass("error");if(isOptionIllegal($(d).parent())==true||isOptionSelected($(d).parent())==true){return;}trackPageLoadTime("SKU/LOT_Selection_Starts::User_Currently_Requested_for_"+f);
selectOptionClick(d,e);}function selectOptionClick(p,n){$('div[id*="GenericVDataFor"]').each(function(){$(this).empty();});$('div[id*="hemmingFor"]').each(function(){$(this).empty();});$('div[id*="hemmingError"]').each(function(){$(this).empty();});$("#monogramForConfirm"+n).empty();$("#monogramFor"+n).empty();
$("#monogramCheckBox"+n).empty();$("#dynamicMessages").hide();$("#inventoryMessage").html("");$("#addtobag").removeClass("swatch");$("#addtobag").removeAttr("href");$("#swatch4").children("p").remove();$("#addToBagImg").attr("alt","add to bag");var m=$("#lotSKUSelectionForm"+n);var o=$(p).attr("title");
o=convertToHTML(o);var l=$(p).parent().parent();var s=l.attr("id");var k=s.substring(n.length);if(!isMouseOverEnabled||k=="Lot"){showSpinner("blockedSectionDiv");}if(k=="Lot"&&getColorCount(n)!=1){clearAllHiddenInputsExceptLot(n);}$("#selectedSKUAttributeName"+n).val(k);var q="Input"+s;var r=$("#"+q);
unselectAllOptions(l);changeOptionState($(p).parent(),SKU_STATE_SELECTED);r.val(o);submitLotSKUSelectionForm(n);}function unselectAllOptions(d){try{d.children('li[class="sku_select"]').each(function(){changeOptionState($(this),SKU_STATE_DEFAULT);});}catch(c){handlejavaScriptError(c);}}function changeColorState(l,k){try{switch(k){case SKU_STATE_DEFAULT:l.attr("class",COLOR_STATE_DEFAULT_CLASS);
l.children("a").children("span").remove();var e=$(l).attr("id");var h="swatch"+e.substring(3);l.children("a").attr("href","#"+h);$("#"+h).children("div").children("span").remove();l.show();break;case SKU_STATE_SELECTED:l.attr("class",COLOR_STATE_SELECTED_CLASS);l.show();break;case SKU_STATE_ILLEGAL:l.attr("class",COLOR_STATE_DEFAULT_CLASS);
l.children("a").children("span").remove();l.children("a").append('<span class="color_illegal">&nbsp;</span>');var e=$(l).attr("id");var h="swatch"+e.substring(3)+"illegal";l.children("a").attr("href","#"+h);if($("#"+h).find("img").size()==1){$("#"+h).append('<span class="largeThumbCross"></span>');}var j=$("#"+h).html();
$("#"+h).html('<div class="crossThumb">'+j+"</div>");break;case SKU_STATE_NOT_AVAILABLE:l.attr("class",COLOR_STATE_DEFAULT_CLASS);l.children("a").children("span").remove();l.children("a").append('<span class="no_color" onclick="clickNoColor(this)">&nbsp;</span>');var e=$(l).attr("id");var h="swatch"+e.substring(3)+"notAvailable";
l.children("a").attr("href","#"+h);if($("#"+h).find("img").size()==1){$("#"+h).append('<span class="largeThumbCrossNoColor"></span>');}var j=$("#"+h).html();$("#"+h).html('<div class="crossThumb">'+j+"</div>");break;}}catch(m){handlejavaScriptError(m);}}function changeOptionState(e,j){linkElement=e.children("a");
tooltipDiv=e.children("div");tooltipDivId=tooltipDiv.attr("id");var h=tooltipDivId;if(tooltipDivId!=undefined){h=tooltipDivId.replace(/\s+/g,"_");tooltipDiv.attr("id",h);}var k=e.attr("id")+":"+linkElement.text();k=k.replace(/"/g,"-");k=k.replace(/'/g,"-");linkElement.attr("href","javascript:void('"+k+"')");
tooltipDiv.html("");try{switch(j){case SKU_STATE_DEFAULT:e.attr("class",SKU_STATE_DEFAULT_CLASS);e.children("a").removeClass("swatch");e.children("a").unbind("mouseenter.tooltip");break;case SKU_STATE_SELECTED:e.attr("class",SKU_STATE_SELECTED_CLASS);e.children("a").removeClass("swatch");e.children("a").unbind("mouseenter.tooltip");
break;case SKU_STATE_ILLEGAL:e.attr("class",SKU_STATE_ILLEGAL_CLASS);linkElement.attr("href","#"+h);tooltipDiv.html("Unavailable for purchase");e.children("a").attr("class","swatch");break;case SKU_STATE_NOT_AVAILABLE:e.attr("class",SKU_STATE_NOT_AVAILABLE_CLASS);linkElement.attr("href","#"+h);tooltipDiv.html("Currently out of stock");
e.children("a").attr("class","swatch");break;}}catch(g){handlejavaScriptError(g);}}function selectColor(p,v){trackPageLoadTime("SKU/LOT_Selection_Starts::Selected_COLOR");var e=$("#PAGETYPE").html();clearMessages();if(isColorSelected($(p).parent())||isColorIllegal($(p).parent())){return;}var u=$("#lotSKUSelectionForm"+v);
showSpinner("blockedSectionDiv");var x="";try{$(p).children("img").each(function(){x=this.alt;});}catch(w){redirectOnError();}$("#selectedSKUAttributeName"+v).val("color");var t=$(p).parent().parent();var s=t.attr("id");var y="Input"+s;var o=s+"Display";var q=$("#"+y);var r=$("#"+o);unselectAllColors(t);
selectThisColor($(p).parent());q.val(x);r.html(x);if(e=="MTM_Graphical"||e=="LOTMTM_Graphical"){$("input#colorForMTM").val(x);}submitLotSKUSelectionForm(v);}function unselectAllColors(d){try{d.children('li[class="'+COLOR_STATE_SELECTED_CLASS+'"]').each(function(){changeColorState($(this),SKU_STATE_DEFAULT);
});}catch(c){handlejavaScriptError(c);}}function selectThisColor(b){changeColorState(b,SKU_STATE_SELECTED);}function submitLotSKUSelectionForm(e){var f=$("#lotSKUSelectionForm"+e);var d={success:receiveAjaxResponse,error:error};f.ajaxSubmit(d);}function receiveAjaxResponse(p,s,m,l){$("#addtobag").attr("disabled",true);
$("#addToBagForm").parent().parent().addClass("red_btn_disabled");if(p.availabilityStatus!=true){disabledDueToInventory=false;favDisabledDueToInventory=false;}var o=p.lotOrPPId;if((p.internationalFlag==""||p.internationalFlag=="false")&&p.internationalMessage!=""){$("#intlselectenablebtn").hide();$("#lotselectaddtobag").show();
$("#intlMessage").html(p.internationalMessage);$("#dynamicIntlMessages").show();$("#pageLoadInfo").hide();$("#pageLoadButton").hide();}if(p.internationalFlag=="true"){$("#lotselectaddtobag").hide();$("#intlselectenablebtn").show();$("#dynamicIntlMessages").hide();$("#inventoryMessage").html("");}if(p.skuSelectionComplete&&p.skuSelectionComplete=="true"){skuSelectionComplete(p);
}else{$("#findInStoreLink"+o).hide();$("#findInStoreDisplayLink"+o).hide();$("#channelMessaging"+o).html("");$("#serviceAndWarrantyHolder"+o).html("");$("#truckAndWhiteGloveDelivery"+o).html("");}if(p.disableAddToCartForRetailPrice!=""&&p.disableAddToCartForRetailPrice=="true"){if(p.lotChannelAvailability!=""&&p.lotChannelAvailability=="both"&&p.isPriceActive=="false"&&p.isRetailPriceActive=="true"){if(typeof document.getElementById("addtobag")!="undefined"&&document.getElementById("addtobag")!=null){var r=$("#addtobag");
r.attr("disabled","disabled");$("#addtoBagAndFav .red_button").removeClass("red_button").addClass("lit_grey_button");}}else{if(typeof document.getElementById("addtobag")!="undefined"&&document.getElementById("addtobag")!=null){var r=$("#addtobag");r.attr("disabled",false);$("#addtoBagAndFav .lit_grey_button").removeClass("lit_grey_button").addClass("red_button");
}}}var e=p.skuOptions;try{if(p.selectedSKUAttributeName=="Lot"){$("#promoDetails").html(p.selectedGraphicalLotPromotion);$("#priceDetails").html(p.lotPriceHtml);$.each(e,function(b,a){updateSKUOptionsOnLotOptionChange(o,a);validateAllSkuOptionsFilled();});}else{$.each(e,function(b,a){updateSKUOptions(o,a);
});}}catch(q){redirectOnError();}var n=$("#pageName").val();if(n=="sampleRegistry"){updateToolTipMessageForSR(o);}else{updateToolTipMessage();}if(jQuery.trim($("#cboxLoadedContent").html()).length>0){$.colorbox.resize();}trackPageLoadTime("SKU/Lot_selection_Request_Served");hideSpinner();if(disabledDueToInventory==false||favAction==true){$("#addToBagForm").parent().parent().removeClass("red_btn_disabled");
if($("#addtobag").attr("name")=="add to bag"){$("#addToBagImg").attr("src","/dotcom/images/add_to_bag_txt.png");}else{$("#addToBagImg").attr("src","/dotcom/images/update_bag_txt.png");}}$("#addtobag").removeAttr("disabled");}function updateSKUOptionsOnLotOptionChange(e,g){var h=g.key;try{if(h=="COLOR"){var j=getOptionValues(g.options);
updateColorOptionsOnLotSelectionChange(e,j);$("#"+e+g.key+">li>a>img").each(function(f,a){var d=$(this).parent().parent();var b=g.options;var s=$(this).attr("alt");var p=false;var q=0;var r="";for(q=0;q<b.length;q++){var c=b[q].option;c=c.replace(/&amp;quot;/g,'"');s=jQuery.trim(s);c=jQuery.trim(c);if(s==c){p=true;
r=b[q].availability;}}if(p==false){changeColorState(d,SKU_STATE_ILLEGAL);}else{if(r=="false"){changeColorState(d,SKU_STATE_NOT_AVAILABLE);}else{if(!isColorSelected(d)){changeColorState(d,SKU_STATE_DEFAULT);}}}});}else{createSkuOptionsOnLotSelectionChange(e,g.options,h);}}catch(k){handlejavaScriptError(k);
}}function getOptionValues(f){var d=new Array();try{$.each(f,function(b,a){d[b]=a.option;});}catch(e){handlejavaScriptError(e);}return d;}function createSkuOptionsOnLotSelectionChange(A,B,p){var r=A+p;var C="Input"+r;$("#"+C).val("");var v="";var q="";var y=SKU_STATE_DEFAULT_CLASS;for(i=0;i<B.length;
i++){var w=B[i];if(B.length==1){$("#"+C).val(q);}var u="tooltipDiv"+A+p+i;q=w.option;q=convertToHTML(q);var s=p+":"+q;s=s.replace(/"/g,"-");s=s.replace(/'/g,"-");y=SKU_STATE_DEFAULT_CLASS;var x="";var z="";var t="";if(w.availability=="false"){y=SKU_STATE_NOT_AVAILABLE_CLASS;x="#tooltipDiv"+r+i;z="swatch";
t="Currently out of stock";}else{x="javascript:void('"+s+"')";}v+='<li class="'+y+'" id="'+p+'"><a title="'+q+'" class="'+z+'" href="'+x+'" id="'+A+i+p+'" onmouseover="mouseOverSku(this,\''+A+"');\" onmouseout=\"mouseOutSku(this,'"+A+"');\" onclick=\"selectOption(this,'"+A+"','Sku');\">"+q+'</a><div class="hidden" id="'+u+'">'+t+"</div></li>";
}$("#"+r).html(v);}function updateSKUOptions(f,d){try{if(d.key=="COLOR"){$("#"+f+d.key+">li>a>img").each(function(o,a){var n=$(this).parent().parent();var b=d.options;var s=$(this).attr("alt");var p=false;var q=0;var r="";for(q=0;q<b.length;q++){var c=b[q].option;c=c.replace(/&amp;quot;/g,'"');s=jQuery.trim(s);
c=jQuery.trim(c);if(s==c){p=true;r=b[q].availability;}}if(p==false){changeColorState(n,SKU_STATE_ILLEGAL);}else{if(r=="false"){changeColorState(n,SKU_STATE_NOT_AVAILABLE);}else{if(!isColorSelected(n)){changeColorState(n,SKU_STATE_DEFAULT);}}}});}else{$("#"+f+d.key+">li>a").each(function(p,c){var o=$(this).parent();
var a=d.options;var m=$(this).html();var n=false;var b=0;var q="";for(b=0;b<a.length;b++){if(removeSpecialCharecters(m.toLowerCase())==removeSpecialCharecters(a[b].option.toLowerCase())){n=true;q=a[b].availability;}}if(n==false){changeOptionState(o,SKU_STATE_ILLEGAL);}else{if(isOptionSelected(o)==false){if(q=="false"){changeOptionState(o,SKU_STATE_NOT_AVAILABLE);
}else{changeOptionState(o,SKU_STATE_DEFAULT);}}}});}}catch(e){handlejavaScriptError(e);}}function error(g,f,e,h){redirectOnError();}function isOptionIllegal(b){if(b.attr("class")==SKU_STATE_ILLEGAL_CLASS){return true;}else{return false;}}function isOptionSelected(b){if(b.attr("class")==SKU_STATE_SELECTED_CLASS){return true;
}else{return false;}}function isColorSelected(b){if(b.attr("class")==COLOR_STATE_SELECTED_CLASS){return true;}else{return false;}}function isColorIllegal(b){if(b.children("a").children("span").attr("class")=="color_illegal"){return true;}else{return false;}}function displayPriceDetails(b){$("#priceDetails").html(b.priceHtml);
}function displayAndValidateInventory(b){$("#skuInvetoryStatus").val(b.favMessage);if(b.availabilityStatus&&b.availabilityStatus=="true"){if(b.message&&b.message!=""){if((b.message=="limited stock available")||(b.message=="manufacturer shipped (ships in 1 week)")){$("#inventoryMessage").html(b.message);
$("#dynamicMessages").show();$("#dynamicMessages").addClass("xgn_alt_message");}else{$("#inventoryMessage").html(b.message);$("#dynamicMessages").show();$("#dynamicMessages").removeClass("xgn_alt_message");}}if(b.lotOrPPId==disabledDueToId||disabledDueToId==""){addOrUpdateDisabled=false;}disabledDueToInventory=false;
favDisabledDueToInventory=false;}else{if(favAction==false){addOrUpdateDisabled=true;disabledDueToInventory=true;$("#addToBagImg").attr("alt","Item is out of stock in current selections, and not available for purchase.");}else{addOrUpdateDisabled=false;disabledDueToInventory=false;}favDisabledDueToInventory=true;
disabledDueToId=b.lotOrPPId;}}function addToCart(){var b=$("#pageName").val();favAction=false;if(!isSinglelotSingleSku){if(b=="sampleRegistry"){if(!hasSampleRegistryErrors()){createNotUserSelectedModalURL();}else{hideSpinner();}}else{if(!hasErrors()){callToCallMetric=true;callToCallMetric=true;createNotUserSelectedModalURL();
}else{hideSpinner();}}}else{$("#errorContainer").hide();checkForSingleLotSingleSkuError();}}function addToGiftRegistry(c){registryAction=true;var d=$("#pageName").val();if(d=="sampleRegistry"){if(!hasSampleRegistryErrors()){createNotUserSelectedModalURL();}}else{if(!hasRegistryErrors(c)){createNotUserSelectedModalURL();
}}}function addToFavorite(b){favAction=true;if(!hasErrors()){cmCreateConversionEventTag("AddToFavorites","1","Favorites",null,b);createNotUserSelectedModalURL();}}function clearAllHiddenInputsExceptLot(d){try{$("#lotSKUSelectionForm"+d+' input[id*="Input'+d+'"]').each(function(){if(this.id!="Input"+d+"Lot"){$(this).val("");
}});$("#"+d+"COLORDisplay").html("");unselectAllColors($("#"+d+"COLOR"));}catch(c){handlejavaScriptError(c);}}function clearMessages(){$('div[id*="GenericVDataFor"]').each(function(){$(this).empty();});$('div[id*="hemmingFor"]').each(function(){$(this).empty();});$('div[id*="hemmingError"]').each(function(){$(this).empty();
});$("#errorMessagesUL").html("");$("#errorContainer").hide();$("#dynamicMessages").hide();$("#addToBagImg").attr("alt","add to bag");$("#inventoryMessage").html("");$("#addtobag").removeClass("swatch");$("#addtobag").removeAttr("href");$("#swatch4").children("p").remove();$("#dynamicIntlMessages").hide();
}function showColor(l,p,e,m,n,o,q){try{$("#"+l+"COLOR img").each(function(){if(this.id==""){if(this.alt==p){$(this).parent().parent().show();if(e=="false"){changeColorState($(this).parent().parent(),SKU_STATE_NOT_AVAILABLE);}if(o!="true"&&q!="true"){return;}if(m=="true"){changeColorState($(this).parent().parent(),SKU_STATE_ILLEGAL);
}if(n=="true"||n==true){$("#Input"+l+"COLOR").val(p);$("#"+l+"COLORDisplay").html(p);changeColorState($(this).parent().parent(),SKU_STATE_SELECTED);}}}});}catch(k){handlejavaScriptError(k);}}function updateColorOptionsOnLotSelectionChange(p,n){$("#lotSKUSelectionForm"+p+" .no_color").remove();try{$("#"+p+"COLOR img").each(function(){if($.inArray(this.alt,n)==-1){if(!isTooltipImage(this)){$(this).parent().parent().attr("class","");
$(this).parent().parent().hide();}}else{$(this).parent().parent().attr("class","");$(this).parent().parent().show();}});if(n.length==1){$("#"+p+"COLORDisplay").html(n[0]);$("#Input"+p+"COLOR").val(n[0]);}}catch(o){handlejavaScriptError(o);}var l=$(".small_swatches");var q=l.prev("span");var e=q.children("span");
if(e.html()!=""){var k=e.attr("id");var m="#Input"+k.replace("Display","");$(m).val(e.html());}}function gup(g){g=g.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var h="[\\?&]"+g+"=([^&#]*)";var e=new RegExp(h);var f=e.exec(window.location.href);if(f==null){return"";}else{return f[1];}}function defaultGraphicalQuantity(){if(gup("fromBag")!="true"&&gup("fromFav")!="true"){var d="1";
try{$('input[id*="prod_quantity"]').each(function(){this.value=d;});}catch(c){handlejavaScriptError(c);}}}function copyAllValues(){var E="";var A="";var s="";var u="";var t="";var D="";var x="";var e="";try{$('span[id*="selectedPPId"]').each(function(){var h=$(this).html();if(h&&h!=""){var b=$("#selectedLotId"+h).html();
if(!isNumeric(b)){b=b.substring(b.indexOf(">")+1,b.indexOf("</"));}var d="0";var c="0";var a=$("#serviceCheck"+b);if(a.attr("checked")==true){d=a.next().html();if(!isNumeric(d)){d=d.substring(d.indexOf(">")+1,d.indexOf("</"));}c=a.next().next().html();if(!isNumeric(c)){c=c.substring(c.indexOf(">")+1,c.indexOf("</"));
}}var g=$("#selectedSKUId"+h).html();if(!isNumeric(g)){g=g.substring(g.indexOf(">")+1,g.indexOf("</"));}var k=$("#selectedMediaCode"+h).html();var f=$("#selectedMediaYear"+h).html();var j=$("#prod_quantity"+h).val();if(E!=""){E=E+",";A=A+",";s=s+",";u=u+",";t=t+",";D=D+",";x=x+",";e=e+",";}else{}E=E+h;
A=A+b;s=s+g;if(h==b){u=$("#mediaLetters").val();t=$("#mediaYears").val();}else{u=u+k;t=t+f;}D=D+d;x=x+c;e=e+j;if(isSinglelotSingleSku){$("#quantity").val(e);}}});}catch(r){handlejavaScriptError(r);}if(E!=""){$("#ppIds").val(E);$("#favPpIds").val(E);$("#grPpIds").val(E);}if(A!=""){$("#lotIds").val(A);
$("#favLotIds").val(A);$("#grLotIds").val(A+"");}if(s!=""){$("#skuIds").val(s);$("#favSkuIds").val(s);$("#grSkuIds").val(s);}if(u!=""){$("#mediaLetters").val(u);$("#favMediaLetters").val(u);$("#grMediaLetters").val(u);}if(t!=""){$("#mediaYears").val(t);$("#favMediaYears").val(t);$("#grMediaYears").val(t);
}if(D==""){$("#serviceLotIds").val("0");$("#favServiceLotIds").val("0");$("#grServiceLotIds").val("0");}else{$("#serviceLotIds").val(D);$("#favServiceLotIds").val(D);$("#grServiceLotIds").val(D);}if(x==""){$("#serviceSKUIds").val("0");$("#favServiceSKUIds").val("0");$("#grServiceSKUIds").val("0");}else{$("#serviceSKUIds").val(x);
$("#favServiceSKUIds").val(x);$("#grServiceSKUIds").val(x);}if(e!=""){$("#quantities").val(e);$("#favQuantities").val(e);$("#grQuantities").val(e);}var z="";var v="";try{if($('form[id*="mandatoryVDataForm"]').length>0){var C=getMandatoryVData();z+=C[0];v+=C[1];}else{var w=getHemmingVData(A);z+=w[0];v+=w[1];
var B=getMonogramVData(A);z+=B[0];v+=B[1];var y=getGenericVdata(A);z+=y[0];v+=y[1];}}catch(r){handlejavaScriptError(r);}v=v.slice(0,v.length-1);z=z.slice(0,z.length-1);$("#vDataType").val("");$("#favVDataType").val("");$("#vDataQuestionairre").val("");$("#favVDataQuestionairre").val("");if(z!=""){if(v!=""){$("#vDataType").val(v);
$("#favVDataType").val(v);$("#grVDataType").val(v);}$("#vDataQuestionairre").val(z);$("#favVDataQuestionairre").val(z);$("#grVDataQuestionairre").val(z);}}function isNumeric(g){var e="0123456789";var f=true;var h;for(i=0;i<g.length&&f==true;i++){h=g.charAt(i);if(e.indexOf(h)==-1){f=false;}}return f;}function clickNoColor(b){$(b).prev().trigger("click");
}function validateAndUpdateItemsGraphical(b){if(!hasErrors()){copyAllValues();updateItems();}else{$.colorbox.resize();}}function validateAndUpdateFavItemsGraphical(){updateFavAction=true;if(!hasFavErrors()){copyAllValues();$("#updateToFavForm").submit();}else{$.colorbox.resize();}}function hasFavErrors(){var d=false;
try{$('form[id*="lotSKUSelectionForm"]').each(function(){var b="";$("#errorMessagesUL").html(b);$("#errorContainer").hide();var a=$(this).attr("id").substring(19);$(this).find('input[id*="Input'+a+'"]').each(function(){if(this.id=="Input"+a+"COLOR"&&$(this).val()==""){b=b+"<li>please select a color</li>";
return;}if($(this).val()==""){b=b+"<li>please "+$(this).prev().html()+"</li>";}});var f=$("#prod_quantity"+a).val();if(!f||f==""){b=b+"<li>Enter a valid quantity from 1-99.</li>";}else{if(f<1||f>99){b=b+"<li>Enter a valid quantity from 1-99.</li>";}else{$("#quantity").val(f);}}if(b!=""){$("#errorMessagesUL").html(b);
$("#errorContainer").show();d=true;}});}catch(c){handlejavaScriptError(c);}return d;}function hasRegistryErrors(){var d=false;try{$('form[id*="lotSKUSelectionForm"]').each(function(){var g="";$("#errorMessagesUL").html(g);$("#errorContainer").hide();var b=$(this).attr("id").substring(19);$(this).find('input[id*="Input'+b+'"]').each(function(){if(this.id=="Input"+b+"COLOR"&&$(this).val()==""){g=g+"<li>select a color</li>";
return;}if($(this).val()==""){g=g+"<li>"+$(this).prev().html()+"</li>";}});var h=$("#prod_quantity"+b).val();var a=$("#hdnQuantity"+b).val();if(!h||h==""){g=g+"<li>Enter a valid quantity from 1-99.</li>";$("#"+a).addClass("error");}else{if(h<1||h>99||!isNumeric(h)){g=g+"<li>Enter a valid quantity from 1-99.</li>";
$("#"+a).addClass("error");}else{$("#quantity").val(h);}}if(g!=""){$("#errorMessagesUL").html(g);$("#errorContainer").show();d=true;}});}catch(c){handlejavaScriptError(c);}return d;}function isTooltipImage(b){if(b.alt.indexOf("Swatch")==-1){return false;}return true;}function enableUpdate(){}function onLoadForMTM(b){hidemandatoryVData();
hideQuantityDiv();defaultQuantityForMTMFlow("Empty");populateConfirmationDivWhileNavigatingFromShoppingBag(b);setupBazaarVoice();if(b=="true"){$('input[value="ADD TO BAG"]').parent().remove();}}function onLoadForLOTMTM(b){hideQuantityDiv();defaultQuantityForMTMFlow("Empty");populateConfirmationDivWhileNavigatingFromShoppingBag(b);
}function addMadeToMeasureToBag(b){favAction=false;addMadeToMeasureToBagAndFav(b);}function addMadeToMeasureToFav(b){favAction=true;addMadeToMeasureToBagAndFav(b);}function addMadeToMeasureToGR(b){registryAction=true;addMadeToMeasureToBagAndFav(b);}function addMadeToMeasureToBagAndFav(k){var m="";var p="MadeToMeasure";
$('div[id*="madetomeasure_questionairre"]').each(function(){var a=$(this).attr("id").substring(28);if(a!=""){m+=a+",";}});var q=$("#selectedSKUId"+k).html();var n=$("#selectedLotId"+k).html();var l=$("#productConfirmation"+k).find("#pricePointLotMTM").html();if(l==undefined||l==""){l=$("#madeToMeasureConfirmationFragment"+k).find("#pricePointLotMTM").html();
}var o=$("#productConfirmation"+k).find("#pricePointSkuMTM").html();if(o==undefined||o==""){o=$("#madeToMeasureConfirmationFragment"+k).find("#pricePointSkuMTM").html();}if(n==k){k=l;}if(m!=""){m=m+k+"_masterLot_"+n+","+k+"_pricePointLot_"+l+","+k+"_MasterSkuId_"+q;$("#vDataQuestionairre").val(m);$("#vDataType").val(p);
$("#grVDataQuestionairre").val(m);$("#grVDataType").val(p);$("#favVDataQuestionairre").val(m);$("#favVDataType").val(p);}if(l!=""){$("#lotIds").val(l);$("#favLotIds").val(l);$("#grLotIds").val(l);}if(o!=""){$("#skuIds").val(o);$("#favSkuIds").val(o);$("#grSkuIds").val(o);}var j;$("input[id='quantities']").each(function(){j=$(this).attr("value");
});$("input[id='quantities']").each(function(){$(this).val(j);});$("#addToFavForm #giftItemId").val($("#giftItemIdFromFav").val());addItems();}function checkForSingleLotSingleSkuError(){$('input[id*="prod_quantity"]').each(function(){var f=/[1-9]\d?/;var d=$("#ppIdorLotId").html();var e=$("#hdnQuantity"+d).val();
if(!f.test(this.value)){$("#errorContainer").find("ul").html("<li>Enter a valid quantity from 1-99.</li>");$("#errorContainer").show();$("#"+e).addClass("error");}else{callToCallMetric=true;createNotUserSelectedModalURL();$("#"+e).removeClass("error");}});}function hasSampleRegistryErrors(){var d=false;
try{var f=$("#selectedPpid").val();$('form[id*="lotSKUSelectionForm'+f+'"]').each(function(){var b="";$("#errorMessagesUL"+f).html(b);$("#errorContainer"+f).hide();if(disabledDueToInventory==true&&favAction==false){b=b+"<li>This item is out of stock and cannot be added to your bag.</li>";disabledDueToInventory=false;
}$(this).find('input[id*="Input'+f+'"]').each(function(){if(this.id=="Input"+f+"COLOR"&&$(this).val()==""){b=b+"<li>select a color</li>";return;}if($(this).val()==""){b=b+"<li>"+$(this).prev().html()+"</li>";}});var c=$("#prod_quantity"+f).val();var a=$("#hdnQuantity"+f).val();if(!c||c==""){b=b+"<li>Enter a valid quantity from 1-99.</li>";
$("#"+a).addClass("error");}else{if(c<1||c>99||!isNumeric(c)){b=b+"<li>Enter a valid quantity from 1-99.</li>";$("#"+a).addClass("error");}else{$("#quantity").val(c);}}if(b!=""){$("#errorMessagesUL"+f).html(b);$("#errorContainer"+f).show();$("html, body").animate({scrollTop:$("#errorContainer"+f).offset().top},"slow");
d=true;}});}catch(e){handlejavaScriptError(e);}return d;}function hasErrors(){var d=false;try{$('form[id*="lotSKUSelectionForm"]').each(function(){var g="";$("#errorMessagesUL").html(g);$("#errorContainer").hide();var b=$(this).attr("id").substring(19);if(disabledDueToInventory==true&&favAction==false){g=g+"<li>This item is out of stock and cannot be added to your bag.</li>";
disabledDueToInventory=false;}$(this).find('input[id*="Input'+b+'"]').each(function(){if(this.id=="Input"+b+"COLOR"&&$(this).val()==""){g=g+"<li>select a color</li>";return;}if($(this).val()==""){g=g+"<li>"+$(this).prev().html()+"</li>";}});var h=$("#prod_quantity"+b).val();var a=$("#hdnQuantity"+b).val();
if(!h||h==""){g=g+"<li>Enter a valid quantity from 1-99.</li>";$("#"+a).addClass("error");}else{if(h<1||h>99||!isNumeric(h)){g=g+"<li>Enter a valid quantity from 1-99.</li>";$("#"+a).addClass("error");}else{$("#quantity").val(h);}}if(g!=""){$("#errorMessagesUL").html(g);$("#errorContainer").show();d=true;
}});}catch(c){handlejavaScriptError(c);}return d;}